var Client=function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"runRequests",(function(){return l})),n.d(t,"calculateDifference",(function(){return I}));let a={},r={};const l=async()=>{o().then((function(){i().then(async()=>await v(r)).then(async()=>await c()).then((function(){m(r)}))}))},o=async()=>{g();const e=await fetch("/url");try{a=await e.json()}catch(e){console.log("error",e)}},i=async()=>{const e=await fetch(a.baseGeonames+r.city+a.keyGeonames);try{const t=await e.json();r.country=t.geonames[0].countryName,r.latitude=t.geonames[0].lat,r.longitude=t.geonames[0].lng,console.log(t),console.log(r.country),console.log(r.latitude),console.log(r.longitude)}catch(e){console.log("error",e)}},c=async()=>{let e,t=Client.calculateDifference();r.tripLength=t.tripLength,t.daysDiff<8?(r.weatherTitle="Current Weather:",e=await s()):(r.weatherTitle="Weather Forecast:",e=await d());let n=r.city.replace(/ /g,"+"),a=await u(n).then(async e=>{console.log("::: IMAGE DATA :::");let t=e.total;console.log("Results: "+t),0==t?a=await u(r.country).then(e=>{console.log(e),r.image=e.hits[0].largeImageURL,console.log(r)}):(r.image=e.hits[0].largeImageURL,console.log(r))});return[e,a]},s=async()=>{console.log(a.baseCurrent+a.lat+r.latitude+a.lon+r.longitude+a.keyWeatherbit);const e=await fetch(a.baseCurrent+a.lat+r.latitude+a.lon+r.longitude+a.keyWeatherbit);try{const t=await e.json();r.temp=t.data[0].temp,r.temp=parseInt(r.temp,10),r.icon=t.data[0].weather.icon,r.icon=r.icon.slice(-1),r.weatherCode=t.data[0].weather.code,r.weatherDescription=t.data[0].weather.description}catch(e){console.log("error",e)}},d=async()=>{console.log(a.baseForecast+a.lat+r.latitude+a.lon+r.longitude+a.keyWeatherbit);const e=await fetch(a.baseForecast+a.lat+r.latitude+a.lon+r.longitude+a.keyWeatherbit);try{const t=await e.json();r.max=t.data[0].max_temp,r.max=parseInt(r.max,10),r.min=t.data[0].min_temp,r.min=parseInt(r.min,10)}catch(e){console.log("error",e)}},u=async(e="")=>{console.log(a.basePixabay+a.keyPixabay+a.query+e+a.imageType);const t=await fetch(a.basePixabay+a.keyPixabay+a.query+e+a.imageType);try{return await t.json()}catch(e){console.log("error",e)}},g=()=>{r.city=document.getElementById("city").value,r.city=y(r.city),r.departure=document.getElementById("start").value,r.return=document.getElementById("end").value,r.flights=document.getElementById("flights").value,r.notes=document.getElementById("notes").value},m=e=>{console.log("CHECKING DATA"),console.log(e),e.departure=h(e.departure),e.return=h(e.return),p(),console.log(e.image);let t=document.createElement("div");t.classList.add("card");let n=document.createElement("div");n.classList.add("image"),n.style.backgroundImage=`url(${e.image})`;let a=document.createElement("div");a.classList.add("info");let r="";r="Current Weather:"===e.weatherTitle?`<div class="weather-data-current">\n<div class="weather-title">\n<h3>${e.weatherTitle}</h3>\n</div>\n<div class="weather-temp">\n<div class="temp">${e.temp}</div>\n<div class="celsius">  °C</div>\n</div>\n<div class="weather-img" style="background-image: ${e.weatherImg}"></div>\n</div>\n`:`<div class="weather-data-forecast">\n<div class="weather-title">\n<h3>${e.weatherTitle}</h3>\n</div>\n<div class="min-temp">\n<div class="temp">min: ${e.min}</div>\n<div class="celsius"> °C</div>\n</div>\n<div class="max-temp">\n<div class="temp">max: ${e.max}</div>\n<div class="celsius"> °C</div>\n</div>\n</div>\n`,a.innerHTML=`<div class="card-heading">\n<h2>${e.city}, ${e.country}</h2>\n<div class="delete-btn"></div>\n</div>\n<div class="card-subheading">\n<h4>${e.departure} - ${e.return}</h4>\n<h4>Trip Length: ${e.tripLength} days</h4>\n</div>\n<div class="card-data">\n`+r+'<div class="trip-data">\n<div class="mixed-text">\n<h3 class="inner-h3">flight info: </h3>\n'+`<textarea class="inner-ta">${e.flights}</textarea>\n</div>\n<div class="mixed-text">\n<h3 class="inner-h3">country info: </h3>\n`+`<textarea class="inner-ta">Region: ${e.region}\nLanguage: ${e.language}\nCurrency: ${e.currency}\nPopulation: ${e.population}</textarea>\n</div>\n</div>\n</div>\n<div class="card-btns">\n</div>\n`,t.appendChild(n),t.appendChild(a),document.getElementById("app").appendChild(t)},h=e=>{let t=(e=new Date(e)).getDate()+1;return`${e.getMonth()+1}/${t}/${e.getFullYear()%100}`},p=()=>{document.getElementsByClassName("weather-img")[0];const e=r.weatherCode;switch(!0){case e<300:r.weatherImg="url('media/thunderstorm.png')";break;case e<600:r.weatherImg="url('media/rainy.png')";break;case e<700:r.weatherImg="url('media/snowy.png')";break;case e<800:r.weatherImg="url('media/mist.png')";break;case e<801:"d"===r.icon?r.weatherImg="url('media/clear_d.png')":r.weatherImg="url('media/clear_n.png')";break;case e<802:"d"===r.icon?r.weatherImg="url('media/partially_cloudy_d.png')":r.weatherImg="url('media/partially_cloudy_n.png')";break;case e>801:r.weatherImg="url('media/cloudy.png')"}},y=e=>e.toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.substring(1)).join(" "),v=async e=>{const t=await fetch("https://restcountries.eu/rest/v2/name/"+r.country);try{const n=await t.json();return console.log("::: COUNTRY DATA :::"),console.log(n),e.currency=n[0].currencies[0].name,e.language=n[0].languages[0].name,e.population=n[0].population,e.population=e.population.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),e.region=n[0].region,n}catch(e){console.log("error",e)}};let f=new Date,w=f.getFullYear()+"-"+("00"+(f.getMonth()+1)).slice(-2)+"-"+("00"+f.getDate()).slice(-2);document.getElementById("start").defaultValue=w;let b=f.getFullYear()+"-"+("00"+(f.getMonth()+1)).slice(-2)+"-"+("00"+(f.getDate()+1)).slice(-2);document.getElementById("end").defaultValue=b;const I=()=>{let e=new Date(document.getElementById("start").value),t=new Date(document.getElementById("end").value),n=D(e,t);e.setDate(e.getDate()+1);let a=e.getTime()-f.getTime(),r=Math.round(a/864e5);return console.log("Difference: "+r),{daysDiff:r,tripLength:n}},D=(e,t)=>{let n=t.getTime()-e.getTime();return Math.round(n/864e5)};n(0);document.getElementById("trip-btn").addEventListener("click",()=>{Client.runRequests()}),document.getElementById("app").addEventListener("click",(function(e){e.target&&e.target.matches("div.delete-btn")&&(e.target.parentNode.parentNode.parentNode.parentNode.removeChild(e.target.parentNode.parentNode.parentNode),console.log("Anchor element clicked!"))})),document.getElementById("start").addEventListener("change",()=>{let e=document.getElementById("start").value;e=new Date(e),e.setDate(e.getDate()+1);let t=new Date(e);t.setDate(t.getDate()+1),t=t.getFullYear()+"-"+("00"+(t.getMonth()+1)).slice(-2)+"-"+("00"+t.getDate()).slice(-2),document.getElementById("end").defaultValue=t})}]);