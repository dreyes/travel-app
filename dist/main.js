var Client=function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=/^(((http[s]?)|file):)?(\/\/)+([0-9a-zA-Z-_.=?&].+)$/,r=/^((\.|\.\.)?\/)([0-9a-zA-Z-_.=?&]+\/)*([0-9a-zA-Z-_.=?&]+)$/,i=function(e){return a.test(e)||r.test(e)};function o(e,t){var n=e.createElement("style");return n.type="text/css",n.appendChild(window.document.createTextNode(t)),n}function d(e,t){var n=e.createElement("link");return n.type="text/css",n.rel="stylesheet",n.href=t,n}function s(e){var t=window.document.createElement("iframe");return t.setAttribute("src","about:blank"),t.setAttribute("style","visibility:hidden;width:0;height:0;position:absolute;z-index:-9999;bottom:0;"),t.setAttribute("width","0"),t.setAttribute("height","0"),t.setAttribute("wmode","opaque"),e.appendChild(t),t}t.createStyle=o,t.createLinkStyle=d,t.createIFrame=s;var l={parent:window.document.body,headElements:[],bodyElements:[]},c=function(){function e(e){this.isLoading=!1,this.hasEvents=!1,this.opts=[l,e||{}].reduce((function(e,t){return Object.keys(t).forEach((function(n){return e[n]=t[n]})),e}),{}),this.iframe=s(this.opts.parent)}return e.prototype.getIFrame=function(){return this.iframe},e.prototype.print=function(e,t,n,a){if(!this.isLoading){var r=this.iframe,s=r.contentDocument,l=r.contentWindow;if(s&&l&&(this.iframe.src="about:blank",this.elCopy=e.cloneNode(!0),this.elCopy)){this.isLoading=!0,this.callback=a;var c=l.document;c.open(),c.write('<!DOCTYPE html><html><head><meta charset="utf-8"></head><body></body></html>'),this.addEvents();var u=this.opts,g=u.headElements,p=u.bodyElements;Array.isArray(g)&&g.forEach((function(e){return c.head.appendChild(e)})),Array.isArray(p)&&p.forEach((function(e){return c.body.appendChild(e)})),Array.isArray(t)&&t.forEach((function(e){e&&c.head.appendChild(i(e)?d(c,e):o(c,e))})),c.body.appendChild(this.elCopy),Array.isArray(n)&&n.forEach((function(e){if(e){var t=c.createElement("script");i(e)?t.src=e:t.innerText=e,c.body.appendChild(t)}})),c.close()}}},e.prototype.printURL=function(e,t){this.isLoading||(this.addEvents(),this.isLoading=!0,this.callback=t,this.iframe.src=e)},e.prototype.launchPrint=function(e){e.document.execCommand("print",!1,void 0)||e.print()},e.prototype.addEvents=function(){var e=this;this.hasEvents||(this.hasEvents=!0,this.iframe.addEventListener("load",(function(){return e.onLoad()}),!1))},e.prototype.onLoad=function(){var e=this;if(this.iframe){this.isLoading=!1;var t=this.iframe,n=t.contentDocument,a=t.contentWindow;if(!n||!a)return;this.callback?this.callback({iframe:this.iframe,element:this.elCopy,launchPrint:function(){return e.launchPrint(a)}}):this.launchPrint(a)}},e}();t.Printd=c,t.default=c},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"runRequests",(function(){return i})),n.d(t,"printPDF",(function(){return v})),n.d(t,"calculateDifference",(function(){return E}));let a={},r={};const i=async()=>{o().then((function(){d().then(async()=>await f(r)).then(async()=>await s()).then((function(){p(r)}))}))},o=async()=>{g();const e=await fetch("/url");try{a=await e.json()}catch(e){console.log("error",e)}},d=async()=>{const e=await fetch(a.baseGeonames+r.city+a.keyGeonames);try{const t=await e.json();r.country=t.geonames[0].countryName,r.latitude=t.geonames[0].lat,r.longitude=t.geonames[0].lng,console.log(t),console.log(r.country),console.log(r.latitude),console.log(r.longitude)}catch(e){console.log("error",e)}},s=async()=>{let e,t=Client.calculateDifference();r.tripLength=t.tripLength,t.daysDiff<8?(r.weatherTitle="Current Weather:",e=await l()):(r.weatherTitle="Weather Forecast:",e=await c());let n=r.city.replace(/ /g,"+"),a=await u(n).then(async e=>{console.log("::: IMAGE DATA :::");let t=e.total;console.log("Results: "+t),0==t?a=await u(r.country).then(e=>{console.log(e),r.image=e.hits[0].largeImageURL,console.log(r)}):(r.image=e.hits[0].largeImageURL,console.log(r))});return[e,a]},l=async()=>{console.log(a.baseCurrent+a.lat+r.latitude+a.lon+r.longitude+a.keyWeatherbit);const e=await fetch(a.baseCurrent+a.lat+r.latitude+a.lon+r.longitude+a.keyWeatherbit);try{const t=await e.json();r.temp=t.data[0].temp,r.temp=parseInt(r.temp,10),r.icon=t.data[0].weather.icon,r.icon=r.icon.slice(-1),r.weatherCode=t.data[0].weather.code,r.weatherDescription=t.data[0].weather.description}catch(e){console.log("error",e)}},c=async()=>{console.log(a.baseForecast+a.lat+r.latitude+a.lon+r.longitude+a.keyWeatherbit);const e=await fetch(a.baseForecast+a.lat+r.latitude+a.lon+r.longitude+a.keyWeatherbit);try{const t=await e.json();r.max=t.data[0].max_temp,r.max=parseInt(r.max,10),r.min=t.data[0].min_temp,r.min=parseInt(r.min,10)}catch(e){console.log("error",e)}},u=async(e="")=>{console.log(a.basePixabay+a.keyPixabay+a.query+e+a.imageType);const t=await fetch(a.basePixabay+a.keyPixabay+a.query+e+a.imageType);try{return await t.json()}catch(e){console.log("error",e)}},g=()=>{r.city=document.getElementById("city").value,r.city=y(r.city),r.departure=document.getElementById("start").value,r.return=document.getElementById("end").value,r.flights=document.getElementById("flights").value,r.notes=document.getElementById("notes").value},p=e=>{console.log("CHECKING DATA"),console.log(e),e.departure=h(e.departure),e.return=h(e.return),m(),console.log(e.image);let t=document.createElement("div");t.classList.add("expanded-card");let n=document.createElement("div");n.classList.add("card");let a=document.createElement("div");a.classList.add("additional-elements");let r=document.createElement("div");r.classList.add("image"),r.style.backgroundImage=`url(${e.image})`;let i=document.createElement("div");i.classList.add("info");let o="";if(""===e.notes)o="+ add notes";else{o="- remove notes";let t=document.createElement("div");t.classList.add("additional"),t.classList.add("notes"),t.innerHTML=`<h3 class="inner-h3">notes: </h3>\n<textarea class="inner-ta">${e.notes}</textarea>\n`,a.appendChild(t)}let d="";d="Current Weather:"===e.weatherTitle?`<div class="weather-data-current">\n<div class="weather-title">\n<h3>${e.weatherTitle}</h3>\n</div>\n<div class="weather-temp">\n<div class="temp">${e.temp}</div>\n<div class="celsius">  °C</div>\n</div>\n<div class="weather-img" style="background-image: ${e.weatherImg}"></div>\n</div>\n`:`<div class="weather-data-forecast">\n<div class="weather-title">\n<h3>${e.weatherTitle}</h3>\n</div>\n<div class="min-temp">\n<div class="temp">min: ${e.min}</div>\n<div class="celsius"> °C</div>\n</div>\n<div class="max-temp">\n<div class="temp">max: ${e.max}</div>\n<div class="celsius"> °C</div>\n</div>\n</div>\n`,i.innerHTML=`<div class="card-heading">\n<h2>${e.city}, ${e.country}</h2>\n<div class="delete-btn"></div>\n</div>\n<div class="card-subheading">\n<h4>${e.departure} - ${e.return}</h4>\n<h4>Trip Length: ${e.tripLength} days</h4>\n</div>\n<div class="card-data">\n`+d+'<div class="trip-data">\n<div class="mixed-text">\n<h3 class="inner-h3">flight info: </h3>\n'+`<textarea class="inner-ta">${e.flights}</textarea>\n</div>\n<div class="mixed-text">\n<h3 class="inner-h3">country info: </h3>\n`+`<textarea class="inner-ta">Region: ${e.region}\nLanguage: ${e.language}\nCurrency: ${e.currency}\nPopulation: ${e.population}</textarea>\n</div>\n</div>\n</div>\n<div class="card-btns">\n<div class="card-btn" id="lodging-btn">+ add lodging info</div>\n<div class="card-btn" id="packing-btn">+ add packing list</div>\n`+`<div class="card-btn" id="notes-btn">${o}</div>\n</div>\n`,n.appendChild(r),n.appendChild(i),t.appendChild(n),t.appendChild(a),document.getElementById("app").appendChild(t)},h=e=>{let t=(e=new Date(e)).getDate()+1;return`${e.getMonth()+1}/${t}/${e.getFullYear()%100}`},m=()=>{document.getElementsByClassName("weather-img")[0];const e=r.weatherCode;switch(!0){case e<300:r.weatherImg="url('media/thunderstorm.png')";break;case e<600:r.weatherImg="url('media/rainy.png')";break;case e<700:r.weatherImg="url('media/snowy.png')";break;case e<800:r.weatherImg="url('media/mist.png')";break;case e<801:"d"===r.icon?r.weatherImg="url('media/clear_d.png')":r.weatherImg="url('media/clear_n.png')";break;case e<802:"d"===r.icon?r.weatherImg="url('media/partially_cloudy_d.png')":r.weatherImg="url('media/partially_cloudy_n.png')";break;case e>801:r.weatherImg="url('media/cloudy.png')"}},y=e=>e.toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.substring(1)).join(" "),f=async e=>{const t=await fetch("https://restcountries.eu/rest/v2/name/"+r.country);try{const n=await t.json();return console.log("::: COUNTRY DATA :::"),console.log(n),e.currency=n[0].currencies[0].name,e.language=n[0].languages[0].name,e.population=n[0].population,e.population=e.population.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),e.region=n[0].region,n}catch(e){console.log("error",e)}},v=()=>{};let b=new Date,w=b.getFullYear()+"-"+("00"+(b.getMonth()+1)).slice(-2)+"-"+("00"+b.getDate()).slice(-2);document.getElementById("start").defaultValue=w;let N=new Date(b);N.setDate(N.getDate()+1),N=N.getFullYear()+"-"+("00"+(N.getMonth()+1)).slice(-2)+"-"+("00"+N.getDate()).slice(-2),document.getElementById("end").defaultValue=N;const E=()=>{let e=new Date(document.getElementById("start").value),t=new Date(document.getElementById("end").value),n=L(e,t);e.setDate(e.getDate()+1);let a=e.getTime()-b.getTime(),r=Math.round(a/864e5);return console.log("Difference: "+r),{daysDiff:r,tripLength:n}},L=(e,t)=>{let n=t.getTime()-e.getTime();return Math.round(n/864e5)};var C=n(0);n(1);document.getElementById("trip-btn").addEventListener("click",()=>{Client.runRequests()}),document.getElementById("print-btn").addEventListener("click",()=>{(new C.Printd).print(document.getElementById("app"),["./main.css","#app {\n    margin-left: 0;\n  }\n  \n  .card, .additional {\n    background: #2D355F;\n  }"],"",({launchPrint:e})=>e())}),document.getElementById("app").addEventListener("click",(function(e){if(e.target&&e.target.matches("div.delete-btn")&&e.target.parentNode.parentNode.parentNode.parentNode.parentNode.removeChild(e.target.parentNode.parentNode.parentNode.parentNode),e.target&&e.target.matches("div#notes-btn"))if("+ add notes"===e.target.innerHTML){e.target.innerHTML="- remove notes";let t=document.createElement("div");t.classList.add("additional"),t.classList.add("notes"),t.innerHTML='<h3>notes: </h3>\n<textarea class="inner-ta" placeholder="add some notes here..."></textarea>\n',e.target.parentNode.parentNode.parentNode.parentNode.childNodes[1].appendChild(t)}else e.target.innerHTML="+ add notes",e.target.parentNode.parentNode.parentNode.parentNode.childNodes[1].removeChild(e.target.parentNode.parentNode.parentNode.parentNode.querySelector(".notes"));if(e.target&&e.target.matches("div#lodging-btn"))if("+ add lodging info"===e.target.innerHTML){e.target.innerHTML="- remove lodging";let t=document.createElement("div");t.classList.add("additional"),t.classList.add("lodging"),t.innerHTML='<h3>lodging info: </h3>\n<textarea class="inner-ta" placeholder="add some lodging info here..."></textarea>\n',e.target.parentNode.parentNode.parentNode.parentNode.childNodes[1].appendChild(t)}else e.target.innerHTML="+ add lodging info",e.target.parentNode.parentNode.parentNode.parentNode.childNodes[1].removeChild(e.target.parentNode.parentNode.parentNode.parentNode.querySelector(".lodging"));if(e.target&&e.target.matches("div#packing-btn"))if("+ add packing list"===e.target.innerHTML){e.target.innerHTML="- remove list";let t=document.createElement("div");t.classList.add("additional"),t.classList.add("packing"),t.innerHTML='<h3>packing info: </h3>\n<textarea class="inner-ta" placeholder="add some packing info here..."></textarea>\n',e.target.parentNode.parentNode.parentNode.parentNode.childNodes[1].appendChild(t)}else e.target.innerHTML="+ add packing list",e.target.parentNode.parentNode.parentNode.parentNode.childNodes[1].removeChild(e.target.parentNode.parentNode.parentNode.parentNode.querySelector(".packing"))})),document.getElementById("start").addEventListener("change",()=>{let e=document.getElementById("start").value;e=new Date(e),e.setDate(e.getDate()+1);let t=new Date(e);t.setDate(t.getDate()+1),t=t.getFullYear()+"-"+("00"+(t.getMonth()+1)).slice(-2)+"-"+("00"+t.getDate()).slice(-2),document.getElementById("end").defaultValue=t})}]);